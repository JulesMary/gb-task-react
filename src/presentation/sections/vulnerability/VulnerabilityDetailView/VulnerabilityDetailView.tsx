import { Text } from "@mantine/core";
import { useParams } from "react-router-dom";
import { DetailCard } from "../../../components";
import { useVulnerabilities } from "../../../hooks";

const VulnerabilityDetailView = () => {
  const { id } = useParams();
  const { data: vulnerabilities } = useVulnerabilities();
  const vulnerability = vulnerabilities?.find((vul) => vul.oid === id);
  if (!vulnerability)
    return <Text>{`Vulnerability with oid ${id} not found`}</Text>;
  const labels = ["Severity", "Qod", "Solution Type", "Asset ID"];
  const vulnerabilityValues = {
    ...vulnerability,
    oid: undefined,
    name: undefined,
  };
  return (
    <DetailCard
      title={vulnerability.name}
      subtitle={`ID: ${vulnerability.oid}`}
      labels={labels}
      values={Object.values(vulnerabilityValues)}
    />
  );
};

export { VulnerabilityDetailView };
